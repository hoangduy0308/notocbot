# Story 3.2: Transaction History (Lá»‹ch sá»­ Giao dá»‹ch)

**Tráº¡ng thÃ¡i:** Approved ğŸŸ¢

## 1. User Story
* **LÃ :** NgÆ°á»i dÃ¹ng
* **TÃ´i muá»‘n:** Xem láº¡i danh sÃ¡ch cÃ¡c giao dá»‹ch gáº§n Ä‘Ã¢y vá»›i má»™t ngÆ°á»i cá»¥ thá»ƒ.
* **Äá»ƒ:** Äá»‘i chiáº¿u, kiá»ƒm tra láº¡i xem mÃ¬nh cÃ³ ghi nháº§m khÃ´ng, hoáº·c chá»©ng minh cho báº¡n bÃ¨ tháº¥y.

## 2. Acceptance Criteria (TiÃªu chÃ­ cháº¥p nháº­n)
1. **Lá»‡nh:** `/history [TÃªn]` (hoáº·c `/log [TÃªn]`).
2. **NLP:** Há»i tá»± nhiÃªn: "Lá»‹ch sá»­ ná»£ Tuan", "Xem log Tuan", "Lá»‹ch sá»­ giao dá»‹ch Tuan".
3. **Logic:**
    * Ãp dá»¥ng Fuzzy Search/Alias Ä‘á»ƒ tÃ¬m Ä‘Ãºng Debtor.
    * Truy váº¥n 5-10 giao dá»‹ch gáº§n nháº¥t cá»§a Debtor Ä‘Ã³.
    * Sáº¯p xáº¿p: Má»›i nháº¥t lÃªn Ä‘áº§u (`created_at DESC`).
4. **Hiá»ƒn thá»‹:**
    * DÃ¹ng Emoji Ä‘á»ƒ phÃ¢n biá»‡t: ğŸ”´ Ná»£ (Vay thÃªm), ğŸŸ¢ Tráº£ (Bá»›t ná»£).
    * Format: `[NgÃ y/ThÃ¡ng] [Emoji] [Sá»‘ tiá»n] ([Ghi chÃº])`.

## 3. Tasks (Nhiá»‡m vá»¥ cá»¥ thá»ƒ)
* [ ] Cáº­p nháº­t `src/bot/nlp_engine.py`: ThÃªm Regex báº¯t cÃ¢u há»i xem lá»‹ch sá»­ (keywords: "lá»‹ch sá»­", "history", "log", "xem láº¡i").
* [ ] Cáº­p nháº­t `src/services/debt_service.py`:
    * ThÃªm hÃ m `get_transaction_history(debtor_id, limit=10)`.
* [ ] Cáº­p nháº­t `src/bot/handlers.py`:
    * ThÃªm `get_history_command`.
    * Xá»­ lÃ½ tÃ¬m ngÆ°á»i (tÃ¡i sá»­ dá»¥ng logic search fuzzy).
    * Format ngÃ y thÃ¡ng sang DD/MM/YYYY (LÆ°u Ã½ convert UTC sang giá» Viá»‡t Nam +7 náº¿u cÃ³ thá»ƒ, hoáº·c giá»¯ nguyÃªn ngÃ y cÅ©ng á»•n cho MVP).
* [ ] ÄÄƒng kÃ½ handler.

## 4. Dev Notes
* **SQL:** `SELECT * FROM transactions WHERE debtor_id = :id ORDER BY created_at DESC LIMIT :limit`.
* **Timezone:** `pytz` cÃ³ thá»ƒ cáº§n thiáº¿t Ä‘á»ƒ convert giá».