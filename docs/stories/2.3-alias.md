ðŸ“„ Story 2.3: Alias Management (Quáº£n lÃ½ Biá»‡t danh)
Tráº¡ng thÃ¡i: Approved ðŸŸ¢

1. User Story
LÃ : NgÆ°á»i dÃ¹ng

TÃ´i muá»‘n: GÃ¡n biá»‡t danh cho ngÆ°á»i trong danh báº¡ (vÃ­ dá»¥: gÃ¡n "Vá»£" lÃ  "Em YÃªu").

Äá»ƒ: TÃ´i cÃ³ thá»ƒ chat ngáº¯n gá»n (vÃ­ dá»¥: "Vá»£ ná»£ 500k") mÃ  Bot váº«n ghi Ä‘Ãºng vÃ o sá»• ná»£ cá»§a ngÆ°á»i tÃªn "Em YÃªu".

2. Acceptance Criteria (TiÃªu chÃ­ cháº¥p nháº­n)
Lá»‡nh gÃ¡n Alias:

CÃº phÃ¡p: /alias [Biá»‡t danh] = [TÃªn tháº­t].

VÃ­ dá»¥: /alias BÃ©o = Tuáº¥n.

Validation:

"TÃªn tháº­t" pháº£i tá»“n táº¡i trong báº£ng debtors. Náº¿u khÃ´ng -> BÃ¡o lá»—i.

Náº¿u "TÃªn tháº­t" chÆ°a cÃ³ -> Gá»£i Ã½ user táº¡o ngÆ°á»i Ä‘Ã³ trÆ°á»›c hoáº·c dÃ¹ng /add.

TÃ­ch há»£p NLP:

Khi chat "BÃ©o ná»£ 50k", há»‡ thá»‘ng pháº£i Æ°u tiÃªn tÃ¬m trong báº£ng aliases trÆ°á»›c.

Náº¿u tháº¥y "BÃ©o" lÃ  alias cá»§a "Tuáº¥n" -> Ghi ná»£ vÃ o ID cá»§a "Tuáº¥n".

Pháº£n há»“i: Bot bÃ¡o "âœ… ÄÃ£ gÃ¡n: 'BÃ©o' lÃ  biá»‡t danh cá»§a 'Tuáº¥n'".

3. Tasks (Nhiá»‡m vá»¥ cá»¥ thá»ƒ)
[ ] Cáº­p nháº­t src/services/debtor_service.py:

ThÃªm hÃ m add_alias(user_id, alias_name, real_name).

Cáº­p nháº­t hÃ m search_debtors_fuzzy (hoáº·c táº¡o hÃ m resolve_debtor):

BÆ°á»›c 1: Check Alias chÃ­nh xÃ¡c.

BÆ°á»›c 2: Check TÃªn chÃ­nh xÃ¡c.

BÆ°á»›c 3: Fuzzy Search Alias + TÃªn.

[ ] Cáº­p nháº­t src/bot/handlers.py:

ThÃªm hÃ m alias_command.

Parse cÃº phÃ¡p dáº¥u báº±ng =.

Gá»i debtor_service.add_alias.

[ ] ÄÄƒng kÃ½ alias_handler trong main.py.

4. Dev Notes
Logic Resolve: Thá»© tá»± Æ°u tiÃªn cá»±c ká»³ quan trá»ng: Alias Exact Match > Name Exact Match > Fuzzy.

SQL: Báº£ng aliases Ä‘Ã£ cÃ³ sáºµn tá»« Story 1.2, chá»‰ viá»‡c dÃ¹ng.