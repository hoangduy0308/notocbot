# Story 3.4: Production Deployment (Triá»ƒn khai)

**Tráº¡ng thÃ¡i:** Approved ğŸŸ¢

## 1. User Story
* **LÃ :** Developer
* **TÃ´i muá»‘n:** Deploy bot lÃªn ná»n táº£ng Ä‘Ã¡m mÃ¢y (Render.com).
* **Äá»ƒ:** Bot hoáº¡t Ä‘á»™ng liÃªn tá»¥c 24/7 mÃ  khÃ´ng cáº§n báº­t mÃ¡y tÃ­nh cÃ¡ nhÃ¢n.

## 2. Acceptance Criteria (TiÃªu chÃ­ cháº¥p nháº­n)
1. **Codebase:** Code Ä‘Æ°á»£c chuáº©n bá»‹ sáºµn sÃ ng cho Production (khÃ´ng hardcode token, cÃ³ file cáº¥u hÃ¬nh deploy).
2. **Cáº¥u hÃ¬nh Render:** CÃ³ file `render.yaml` hoáº·c `Dockerfile` chuáº©n.
3. **Webhook Logic:** Trong `main.py` pháº£i cÃ³ logic tá»± Ä‘á»™ng:
    * Náº¿u cÃ³ biáº¿n `WEBHOOK_URL` -> Cháº¡y cháº¿ Ä‘á»™ Webhook (Production).
    * Náº¿u khÃ´ng cÃ³ -> Cháº¡y cháº¿ Ä‘á»™ Polling (Local).
4. **Báº£o máº­t:** File `.env` tuyá»‡t Ä‘á»‘i khÃ´ng Ä‘Æ°á»£c commit lÃªn GitHub.

## 3. Tasks (Nhiá»‡m vá»¥ cá»¥ thá»ƒ)
* [ ] **Review `main.py`:** Äáº£m báº£o logic chuyá»ƒn Ä‘á»•i giá»¯a Polling/Webhook hoáº¡t Ä‘á»™ng Ä‘Ãºng dá»±a trÃªn biáº¿n mÃ´i trÆ°á»ng `WEBHOOK_URL`.
* [ ] **Táº¡o `render.yaml`:** File cáº¥u hÃ¬nh "Infrastructure as Code" cho Render (Ä‘á»ƒ Render biáº¿t Ä‘Ã¢y lÃ  Python app, cÃ¡ch build, cÃ¡ch cháº¡y).
* [ ] **Review `Dockerfile`:** Äáº£m báº£o file nÃ y Ä‘Ã£ tá»‘i Æ°u (dÃ¹ng `python:3.11-slim`, cÃ i Ä‘á»§ thÆ° viá»‡n).
* [ ] **Git Prep:** Kiá»ƒm tra `.gitignore` láº§n cuá»‘i Ä‘á»ƒ cháº¯c cháº¯n Ä‘Ã£ loáº¡i bá» `.env`, `__pycache__`, `venv`.

## 4. Dev Notes
* **Render Command:** Start command trÃªn Render sáº½ lÃ  `uvicorn src.main:app --host 0.0.0.0 --port $PORT`.